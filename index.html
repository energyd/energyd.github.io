<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="拨鼠侠的一天">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="拨鼠侠的一天">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="拨鼠侠的一天">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>拨鼠侠的一天</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">拨鼠侠的一天</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/15/Boggle-Game/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="拨鼠侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boshu_gif.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="拨鼠侠的一天">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/15/Boggle-Game/" itemprop="url">Boggle Game</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-15T16:33:48-08:00">
                2018-12-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Graph/" itemprop="url" rel="index">
                    <span itemprop="name">Graph</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/15/Boggle-Game/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/12/15/Boggle-Game/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>可以先去看下: <a href="https://energyd.github.io/2018/11/19/212-Word-Search-II/" target="_blank" rel="noopener">Word Search II</a>. 这题的不同之处在于我们要找到一个在矩阵里不重叠的词的集合</p>
<h5 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h5><p>给定一个2D矩阵包括 <code>a-z</code> 和字典 <code>dict</code>，找到矩阵上最大的单词集合，这些单词不能在相同的位置重叠。返回最大集合的 <code>大小</code></p>
<p>可能还有种变体是让求包含最大的单词集合的Path, 这个之后再说</p>
<h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><h6 id="思路1-暴力的易懂解法"><a href="#思路1-暴力的易懂解法" class="headerlink" title="思路1: 暴力的易懂解法"></a>思路1: 暴力的易懂解法</h6><ol>
<li>先用word search II求出可能的所有单词(允许重叠)</li>
<li>去重叠, 用combination的写法求出不重叠的最大集合</li>
</ol>
<p>复杂度: K: dict里的单词数, L: 单词的平均长度, m,n: board的长宽<br>第一步: O(K’<em>‘L + m’</em>‘n’<em>‘4^L)<br>   K’</em>‘L是建Trie, mn是外层循环, 4^L是搜索用时, 因为上下左右四种选择, L是搜索树深度<br>第二步: O(L’*’2^K)<br>   2^K是普通Combination耗时, L是每次递归都要mark路径为blocked</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String[] input =</span><br><span class="line">                      &#123;</span><br><span class="line">                      <span class="string">"aple"</span>,</span><br><span class="line">                      <span class="string">"ppig"</span>,</span><br><span class="line">                      <span class="string">"plex"</span>,</span><br><span class="line">                      <span class="string">"agel"</span></span><br><span class="line">                      &#125;;</span><br><span class="line">    String[] dict = &#123;<span class="string">"apple"</span>, <span class="string">"plex"</span>, <span class="string">"pig"</span>, <span class="string">"page"</span>, <span class="string">"age"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    String[] input2 = &#123;<span class="string">"aaaa"</span>,<span class="string">"aaaa"</span>,<span class="string">"aaaa"</span>&#125;;</span><br><span class="line">    String[] dict2 = &#123;<span class="string">"aaa"</span>, <span class="string">"aa"</span>, <span class="string">"a"</span>, <span class="string">"aaaa"</span>, <span class="string">"aaaaa"</span>, <span class="string">"aaaaaa"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    Solution sol = <span class="keyword">new</span> Solution();</span><br><span class="line">    List&lt;String&gt; res = sol.boggle(dict2, sol.stringToBoard(input2));</span><br><span class="line">    System.out.println(<span class="string">"can fit "</span> + res.size() + <span class="string">" words"</span>);</span><br><span class="line">    <span class="keyword">for</span> (String w : res) &#123;</span><br><span class="line">      System.out.print(w + <span class="string">", "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">char</span>[][] board;</span><br><span class="line">  <span class="keyword">private</span> Trie trie;</span><br><span class="line">  <span class="keyword">int</span> m;</span><br><span class="line">  <span class="keyword">int</span> n;</span><br><span class="line">  <span class="keyword">int</span>[] dx = &#123;<span class="number">0</span>, -<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line">  <span class="keyword">int</span>[] dy = &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> maxWords = -<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">private</span> List&lt;Path&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">boggle</span> <span class="params">(String[] dict, <span class="keyword">char</span>[][] board)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// get all possible words and their paths (each word can have multiple paths)</span></span><br><span class="line">    List&lt;Path&gt; paths = findWords(dict, board);</span><br><span class="line">    combination(<span class="keyword">new</span> ArrayList&lt;&gt;(), paths, <span class="keyword">new</span> HashSet&lt;&gt;(), <span class="number">0</span>);</span><br><span class="line">    List&lt;String&gt; wordList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Path path : res) &#123;</span><br><span class="line">      wordList.add(path.word);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> wordList;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">combination</span><span class="params">(List&lt;Path&gt; currPathList, List&lt;Path&gt; paths, </span></span></span><br><span class="line"><span class="function"><span class="params">                          Set&lt;Integer&gt; blockedPoints, <span class="keyword">int</span> startIdx)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 注意这里像subset, 不是只有startIdx == paths.size时候才加入答案</span></span><br><span class="line">    <span class="keyword">if</span> (currPathList.size() &gt; maxWords) &#123;</span><br><span class="line">      maxWords = currPathList.size();</span><br><span class="line">      res.clear();</span><br><span class="line">      res.addAll(currPathList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (startIdx == paths.size()) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = startIdx; i &lt; paths.size(); i++) &#123;</span><br><span class="line">      <span class="comment">//注意这里用个bool判断可以继续再往blockedPoints里面放,不然会污染</span></span><br><span class="line">      <span class="keyword">boolean</span> blocked = <span class="keyword">false</span>;</span><br><span class="line">      List&lt;Integer&gt; candPath = paths.get(i).path;</span><br><span class="line">      <span class="keyword">for</span> (Integer point : candPath) &#123;</span><br><span class="line">        <span class="keyword">if</span> (blockedPoints.contains(point)) &#123;</span><br><span class="line">          blocked = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (blocked) <span class="keyword">continue</span>;</span><br><span class="line">      <span class="keyword">if</span> (!blocked) blockedPoints.addAll(candPath);</span><br><span class="line">      currPathList.add(paths.get(i));</span><br><span class="line">      combination(currPathList, paths, blockedPoints, i + <span class="number">1</span>);</span><br><span class="line">      blockedPoints.removeAll(candPath);</span><br><span class="line">      currPathList.remove(currPathList.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> List&lt;Path&gt; <span class="title">findWords</span><span class="params">(String[] dict, <span class="keyword">char</span>[][] board)</span> </span>&#123;</span><br><span class="line">    buildTrie(dict);</span><br><span class="line">    m = board.length;</span><br><span class="line">    n = board[<span class="number">0</span>].length;</span><br><span class="line">    <span class="keyword">this</span>.board = board;</span><br><span class="line"></span><br><span class="line">    List&lt;Path&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">        findNeighborWords(<span class="keyword">new</span> ArrayList&lt;&gt;(), res, i, j, trie.root);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findNeighborWords</span><span class="params">(List&lt;Integer&gt; path,</span></span></span><br><span class="line"><span class="function"><span class="params">                                List&lt;Path&gt; wordPath,</span></span></span><br><span class="line"><span class="function"><span class="params">                                <span class="keyword">int</span> x, <span class="keyword">int</span> y, TrieNode node)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span> || x &gt;= m || y &lt; <span class="number">0</span> || y &gt;= n</span><br><span class="line">            || board[x][y] == <span class="string">'#'</span> || !node.children.containsKey(board[x][y])) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">char</span> c = board[x][y];</span><br><span class="line">    path.add(x * n + y);</span><br><span class="line">    board[x][y] = <span class="string">'#'</span>;</span><br><span class="line">    node = node.children.get(c);<span class="comment">//错点,board[x][y]已改</span></span><br><span class="line">    <span class="keyword">if</span> (node.word != <span class="keyword">null</span>) &#123;</span><br><span class="line">      wordPath.add(<span class="keyword">new</span> Path(node.word, <span class="keyword">new</span> ArrayList&lt;&gt;(path)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> xx = x + dx[i];</span><br><span class="line">      <span class="keyword">int</span> yy = y + dy[i];</span><br><span class="line">      findNeighborWords(path, wordPath, xx, yy, node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    path.remove(path.size() - <span class="number">1</span>);</span><br><span class="line">    board[x][y] = c;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Path</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; path;</span><br><span class="line">    String word;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Path</span><span class="params">(String word, List&lt;Integer&gt; path)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.path = path;</span><br><span class="line">      <span class="keyword">this</span>.word = word;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">intersect</span> <span class="params">(Path that)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i : <span class="keyword">this</span>.path) &#123;</span><br><span class="line">        <span class="keyword">if</span> (that.path.contains(i)) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildTrie</span><span class="params">(String[] dict)</span> </span>&#123;</span><br><span class="line">    trie = <span class="keyword">new</span> Trie();</span><br><span class="line">    <span class="keyword">for</span> (String w : dict) &#123;</span><br><span class="line">      trie.addWord(w);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Trie</span> </span>&#123;</span><br><span class="line">    TrieNode root = <span class="keyword">new</span> TrieNode();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addWord</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">      TrieNode curr = root;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">        curr.children.putIfAbsent(c, <span class="keyword">new</span> TrieNode());</span><br><span class="line">        curr = curr.children.get(c);</span><br><span class="line">      &#125;</span><br><span class="line">      curr.word = word;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123;</span><br><span class="line">    String word = <span class="keyword">null</span>;</span><br><span class="line">    Map&lt;Character, TrieNode&gt; children = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">char</span>[][] stringToBoard(String[] input) &#123;</span><br><span class="line">    <span class="keyword">int</span> m = input.length;</span><br><span class="line">    <span class="keyword">int</span> n = input[<span class="number">0</span>].length();</span><br><span class="line">    <span class="keyword">char</span>[][] res = <span class="keyword">new</span> <span class="keyword">char</span>[m][n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">        res[i][j] = input[i].charAt(j);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="思路2-高级的双层嵌套搜索"><a href="#思路2-高级的双层嵌套搜索" class="headerlink" title="思路2: 高级的双层嵌套搜索"></a>思路2: 高级的双层嵌套搜索</h6><p>核心思想是:</p>
<ol>
<li><p>对于每个cell, 求出以这个cell为起点的所有单词</p>
</li>
<li><p>将上一步求出的这些单词一个一个试着放进board, 对于每个单词</p>
<p>a. 把这个单词的路径标记为已访问<br>b..递归求在这个单词已访问的平行世界里的能fit进board的最大集合</p>
</li>
</ol>
<p>网上大神的思路解析: <a href="https://jhonwillbao.github.io/2016/11/17/airbnb-boggle-game.html" target="_blank" rel="noopener">https://jhonwillbao.github.io/2016/11/17/airbnb-boggle-game.html</a></p>
<ol>
<li>还是用一个 Trie 来加速 Word 的查找</li>
<li>第一个循环，遍历 board 上每一个点，然后从这里找第一个单词（因为第一个单词的选择会影响最终单词数量），开始第一个递归。</li>
<li>第一个递归的作用是，从当前点开始，通过第二个递归拿到当前点可行的每一个单词。挨个放入，每放入一个更新当前 board 的使用情况，然后开始下一层搜索。</li>
<li>第二个递归的作用是，从当前点开始，找所有可行的单词 indexes，为第一个递归提供选择</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 注意: 如果字典里的词能重复放的话,主函数(findMostWords)要用list而不是set</span></span><br><span class="line"><span class="comment"> *       如果字典里的词只能放一次,主函数要用set而不是list</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoggleGame</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">char</span>[][] stringArrToBoard (String[] input) &#123;</span><br><span class="line">    <span class="keyword">int</span> rows = input.length;</span><br><span class="line">    <span class="keyword">int</span> cols = input[<span class="number">0</span>].length();</span><br><span class="line">    <span class="keyword">char</span>[][] board = <span class="keyword">new</span> <span class="keyword">char</span>[rows][cols];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; cols; j++) &#123;</span><br><span class="line">        board[i][j] = input[i].charAt(j);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> board;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String[] input = &#123;<span class="string">"aaaa"</span>, <span class="string">"aaaa"</span>, <span class="string">"aaaa"</span>&#125;;</span><br><span class="line">    <span class="comment">//String[] dict = &#123;"aaa", "aa", "a", "aaaa", "aaaaa", "aaaaaa"&#125;;</span></span><br><span class="line">    String[] dict = &#123;<span class="string">"aa"</span>, <span class="string">"a"</span>, <span class="string">"aaaa"</span>, <span class="string">"aaaaa"</span>, <span class="string">"aaaaaa"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        String[] input =</span></span><br><span class="line"><span class="comment">//                &#123;</span></span><br><span class="line"><span class="comment">//                "aple",</span></span><br><span class="line"><span class="comment">//                "ppig",</span></span><br><span class="line"><span class="comment">//                "plex",</span></span><br><span class="line"><span class="comment">//                "agel"</span></span><br><span class="line"><span class="comment">//                &#125;;</span></span><br><span class="line"><span class="comment">//        String[] dict = &#123;"apple", "plex", "pig", "page", "age"&#125;;</span></span><br><span class="line">    BoggleGame sol = <span class="keyword">new</span> BoggleGame();</span><br><span class="line">    sol.boggle(stringArrToBoard(input), dict);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123;</span><br><span class="line">    TrieNode[] children = <span class="keyword">new</span> TrieNode[<span class="number">26</span>];</span><br><span class="line">    <span class="keyword">boolean</span> isWord;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Trie</span> </span>&#123;</span><br><span class="line">    TrieNode root;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Trie</span> <span class="params">(TrieNode root)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.root = root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addWord</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">      TrieNode curr = root;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (curr.children[c - <span class="string">'a'</span>] == <span class="keyword">null</span>) &#123;</span><br><span class="line">          curr.children[c - <span class="string">'a'</span>] = <span class="keyword">new</span> TrieNode();</span><br><span class="line">        &#125;</span><br><span class="line">        curr = curr.children[c - <span class="string">'a'</span>];</span><br><span class="line">      &#125;</span><br><span class="line">      curr.isWord = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">int</span>[] dx = &#123;<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span> , <span class="number">0</span>&#125;;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">int</span>[] dy = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">char</span>[][] board;</span><br><span class="line">  <span class="keyword">private</span> String[] dict;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span>[][] visited;</span><br><span class="line">  <span class="keyword">private</span> Trie trie;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">boggle</span> <span class="params">(<span class="keyword">char</span>[][] board, String[] dict)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.board = board;</span><br><span class="line">    <span class="keyword">this</span>.dict = dict;</span><br><span class="line">    buildTrie();</span><br><span class="line">    visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[board.length][board[<span class="number">0</span>].length];</span><br><span class="line">    List&lt;String&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    findMostWords(res, <span class="keyword">new</span> ArrayList&lt;&gt;(), <span class="number">0</span>, <span class="number">0</span>, trie.root);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"can fit: "</span> + res.size() + <span class="string">" words"</span>);</span><br><span class="line">    System.out.println(<span class="string">"Words: "</span>);</span><br><span class="line">    <span class="keyword">for</span> (String str : res) &#123;</span><br><span class="line">      System.out.print(str + <span class="string">", "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.size();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findMostWords</span> <span class="params">(List&lt;String&gt; res, List&lt;String&gt; curWords, <span class="keyword">int</span> x, <span class="keyword">int</span> y, TrieNode curNode)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m = board.length;</span><br><span class="line">    <span class="keyword">int</span> n = board[<span class="number">0</span>].length;</span><br><span class="line">    <span class="comment">// 遍历整个board, 以每个cell为起点找各自的最大集合</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = x; i &lt; m; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = y; j &lt; n; j++) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; nextWords = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        List&lt;Integer&gt; path = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">// 相当于word search II, 找到以这个点为起点能找到所有words</span></span><br><span class="line">        findNextWords(nextWords, path, i, j, curNode);</span><br><span class="line">        <span class="comment">// 把每个词放入都试下</span></span><br><span class="line">        <span class="keyword">for</span> (List&lt;Integer&gt; nextWordIdx : nextWords) &#123;</span><br><span class="line">          String nextWord = <span class="string">""</span>;</span><br><span class="line">          <span class="comment">// 把这个词的路径标记已访问</span></span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> idx : nextWordIdx) &#123;</span><br><span class="line">            <span class="keyword">int</span> row = idx / n;</span><br><span class="line">            <span class="keyword">int</span> col = idx % n;</span><br><span class="line">            visited[row][col] = <span class="keyword">true</span>;</span><br><span class="line">            nextWord += board[row][col];</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// 把这个词放入集合</span></span><br><span class="line">          curWords.add(nextWord);</span><br><span class="line">          <span class="keyword">if</span> (curWords.size() &gt; res.size()) &#123;</span><br><span class="line">            res.clear();</span><br><span class="line">            res.addAll(curWords);</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 以此点为起点找这个平行世界的最大集合</span></span><br><span class="line">          findMostWords(res, curWords, i, j, curNode);<span class="comment">//不要写成x,y!!!!</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> idx : nextWordIdx) &#123;</span><br><span class="line">            <span class="keyword">int</span> row = idx / n;</span><br><span class="line">            <span class="keyword">int</span> col = idx % n;</span><br><span class="line">            visited[row][col] = <span class="keyword">false</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          curWords.remove(curWords.size() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      y = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 相当于word search II</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findNextWords</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; words, List&lt;Integer&gt; path, <span class="keyword">int</span> x, <span class="keyword">int</span> y, TrieNode curNode)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!canGo(x, y) || curNode.children[board[x][y] - <span class="string">'a'</span>] == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> c = board[x][y];</span><br><span class="line">    curNode = curNode.children[c - <span class="string">'a'</span>];</span><br><span class="line"></span><br><span class="line">    path.add(x * board[<span class="number">0</span>].length + y);</span><br><span class="line">    <span class="comment">// find a word</span></span><br><span class="line">    <span class="keyword">if</span> (curNode.isWord) &#123;<span class="comment">//这里也要注意,上面换了curNode才能直接用isWord</span></span><br><span class="line">      words.add(<span class="keyword">new</span> ArrayList&lt;&gt;(path));</span><br><span class="line"><span class="comment">//      path.remove(path.size () - 1);//注意别漏</span></span><br><span class="line"><span class="comment">//      return;//注意这里没有也能解出,面试时候可以不写</span></span><br><span class="line">    &#125;</span><br><span class="line">    visited[x][y] = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i  = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> xx = x + dx[i];</span><br><span class="line">      <span class="keyword">int</span> yy = y + dy[i];</span><br><span class="line">      findNextWords(words, path, xx, yy, curNode);</span><br><span class="line">    &#125;</span><br><span class="line">    visited[x][y] = <span class="keyword">false</span>;</span><br><span class="line">    path.remove(path.size() - <span class="number">1</span>);<span class="comment">//别漏</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">canGo</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span> || x &gt;= board.length || y &lt; <span class="number">0</span> || y &gt;= board[<span class="number">0</span>].length || visited[x][y]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">buildTrie</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    trie = <span class="keyword">new</span> Trie(<span class="keyword">new</span> TrieNode());</span><br><span class="line">    <span class="keyword">for</span> (String word : dict) &#123;</span><br><span class="line">      trie.addWord(word);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>po一个别人的思路 (code已过lintcode的AC)</p>
<p><a href="https://www.1point3acres.com/bbs/thread-465509-1-1.html" target="_blank" rel="noopener">https://www.1point3acres.com/bbs/thread-465509-1-1.html</a></p>
<p>看到网上的解法都是用好几个search来嵌套，一是不straight forward，二是比较容易出错，不好debug。下面分享下我的解法: m, n是board的长宽，l是word的平均长度，k是board上面找到word的个数。<br>step1. 找到所有word， 并记录path。 时间复杂度，O(mnl)<br>step2. 找到每个word的有相交的邻居。 时间复杂度 O(kkl)<br>step3. 用combination找word的可行的组合，track最长组合的长度。 时间复杂度 O(2^k)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">boggleGame</span><span class="params">(self, board, words)</span>:</span></span><br><span class="line">    <span class="comment"># find word on the board</span></span><br><span class="line">    word_list = self.findWords (board, words)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># assign indexes to word paths</span></span><br><span class="line">    paths = &#123;&#125;</span><br><span class="line">    index = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> word_list.items ():</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> v:</span><br><span class="line">            paths[index] = set (_)</span><br><span class="line">            index += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># create adjacent list of paths</span></span><br><span class="line">    adj = collections.defaultdict (set)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> paths:</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> paths:</span><br><span class="line">            <span class="keyword">if</span> i == j:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> paths[i] &amp; paths[j]:</span><br><span class="line">                adj[i].add (j)</span><br><span class="line">                adj[j].add (i)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># search paths combination</span></span><br><span class="line">    self.max_len = <span class="number">0</span></span><br><span class="line">    self.combination (len (paths), adj, [], set (), <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># return max len of combination</span></span><br><span class="line">    <span class="keyword">return</span> self.max_len</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">combination</span><span class="params">(self, n, adj, path, removed, start)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> start == n:</span><br><span class="line">        self.max_len = max (self.max_len, len (path))</span><br><span class="line">    <span class="comment"># print(removed, path)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range (start, n):</span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> removed:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        path.append (i)</span><br><span class="line">        <span class="comment"># print(adj[i],'adj')</span></span><br><span class="line">        removed = removed.union (adj[i])</span><br><span class="line">        <span class="comment"># print(removed,'fjds')</span></span><br><span class="line">        self.combination (n, adj, path, removed, i + <span class="number">1</span>)</span><br><span class="line">        path.pop ()</span><br><span class="line">        removed = removed - adj[i]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findWords</span><span class="params">(self, board, words)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    :type board: List[List[str]]</span></span><br><span class="line"><span class="string">    :type words: List[str]</span></span><br><span class="line"><span class="string">    :rtype: List[str]</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    trie = self.buildTrie (board, words)-baidu <span class="number">1</span>point3acres</span><br><span class="line">    <span class="comment"># print (trie)</span></span><br><span class="line">    rst = collections.defaultdict (list)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range (len (board)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range (len (board[<span class="number">0</span>])):</span><br><span class="line">            self.search (trie, board, i, j, rst, [])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (rst)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">(self, trie, board, i, j, rst, path)</span>:</span></span><br><span class="line">    <span class="comment"># print(i, j)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> i &lt; <span class="number">0</span> <span class="keyword">or</span> j &lt; <span class="number">0</span> <span class="keyword">or</span> i &gt;= len (board) <span class="keyword">or</span> j &gt;= len (board[<span class="number">0</span>]) <span class="keyword">or</span> board[i][j] <span class="keyword">not</span> <span class="keyword">in</span> trie:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    c = board[i][j]</span><br><span class="line">    trie = trie[board[i][j]]</span><br><span class="line">    path.append ((i * len (board[<span class="number">0</span>]) + j))</span><br><span class="line">    board[i][j] = <span class="string">'#'</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'word'</span> <span class="keyword">in</span> trie:</span><br><span class="line">        <span class="comment"># print ('yes', trie['word'])</span></span><br><span class="line">        <span class="keyword">if</span> path[::<span class="number">-1</span>] <span class="keyword">not</span> <span class="keyword">in</span> rst[trie[<span class="string">'word'</span>]]:</span><br><span class="line">            rst[trie[<span class="string">'word'</span>]].append (list (path))</span><br><span class="line">        board[i][j] = c</span><br><span class="line">        path.pop ()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    self.search (trie, board, i + <span class="number">1</span>, j, rst, path)</span><br><span class="line">    self.search (trie, board, i - <span class="number">1</span>, j, rst, path)</span><br><span class="line">    self.search (trie, board, i, j + <span class="number">1</span>, rst, path)</span><br><span class="line">    self.search (trie, board, i, j - <span class="number">1</span>, rst, path)</span><br><span class="line">    board[i][j] = c</span><br><span class="line">    path.pop ()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">buildTrie</span><span class="params">(self, board, words)</span>:</span></span><br><span class="line">    trie = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> w <span class="keyword">in</span> words:</span><br><span class="line">        crt = trie</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> w:</span><br><span class="line">            <span class="keyword">if</span> c <span class="keyword">not</span> <span class="keyword">in</span> crt:</span><br><span class="line">                crt[c] = &#123;&#125;</span><br><span class="line">            crt = crt[c]</span><br><span class="line">        crt[<span class="string">'word'</span>] = w</span><br><span class="line">    <span class="keyword">return</span> trie</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/15/Kth-Largest-Number/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="拨鼠侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boshu_gif.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="拨鼠侠的一天">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/15/Kth-Largest-Number/" itemprop="url">Kth Largest Number</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-15T16:22:00-08:00">
                2018-12-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/题型/" itemprop="url" rel="index">
                    <span itemprop="name">题型</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/15/Kth-Largest-Number/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/12/15/Kth-Largest-Number/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Leetcode 4 是求两个有序数组中位数. 我们将至推广为求第k大的元素. </p>
<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>初阶：有两个数组A和B，假设A和B已经有序（从大到小），求A和B数组中所有数的第K大。</p>
<p>进阶：有N台机器，每台机器上有一个有序的大数组，需要求得所有机器上所有数中的第K大。注意，需要考虑N台机器的并行计算能力</p>
<p><a href="https://www.jiuzhang.com/qa/907/" target="_blank" rel="noopener">https://www.jiuzhang.com/qa/907/</a></p>
<h2 id="解答"><a href="#解答" class="headerlink" title="解答"></a>解答</h2><p>初阶：比较A[k/2]和B[k/2]，如果A[k/2]&gt;=B[k/2]那么A的前k/2个数一定都在前k-1大中，将A数组前k/2个数扔掉，反之扔掉B的前k/2个数。将k减小k/2。重复上述操作直到k=1。比较A和B的第一个数即可得到结果。时间复杂度O(logk)</p>
<p>进阶：二分答案S，将S广播给每台机器，每台机器用二分法求得有多少比该数小的数。汇总结果后可判断是该将S往上还是往下调整。</p>
<p>面试官角度：</p>
<p>初阶问题是一个难度比较大的算法题。需要有一定的算法训练功底。主要用到的思想是递归。首先容易想到的方法是合并两个数组（见面试题5，有序数组的合并），这样复杂度为O(k)，那么答出这个以后，面试官会问你，还有更好的方法么？这个时候就要往O(logk)的思路去想，O(logk)就意味着需要用一种方法每次将k的规模减小一半，于是想到，每次要扔掉一个数组或两个数组中的k/2个数，于是想到去比较A[k/2]和B[k/2]，仔细思考比较结果，然后想到较大的那一方的前k/2个数一定都在前k-1大的数中， 所以可以扔掉。</p>
<p>进阶问题的考察点是逆向思维。二分答案是一种常见的算法思路（见面试题2 抄书问题），所以当你想不出题目的时候，往往可以试试看是否可以二分答案。因为需要发挥N台机器的并行计算能力，所以想到让每台机器互不相关的做一件事情，然后将结果汇总来判断。</p>
<p>一般来讲，面试中问题这两个题目，说明职位对算法能力的要求还是比较高的。 </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/01/Stack-and-Heap/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="拨鼠侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boshu_gif.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="拨鼠侠的一天">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/01/Stack-and-Heap/" itemprop="url">Stack and Heap</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-01T07:11:10-08:00">
                2018-12-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/基础知识/" itemprop="url" rel="index">
                    <span itemprop="name">基础知识</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/01/Stack-and-Heap/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/12/01/Stack-and-Heap/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h3><p><a href="https://en.wikipedia.org/wiki/Call_stack" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Call_stack</a></p>
<p>The primary purpose of a call stack is to <em>store the return addresses</em>. When a subroutine is called, the location (address) of the instruction at which the calling routine can later resume needs to be saved somewhere. Using a stack to save the return address has important advantages over alternative <a href="https://en.wikipedia.org/wiki/Calling_convention" target="_blank" rel="noopener">calling conventions</a>. One is that each task can have its own stack, and thus the subroutine can be <a href="https://en.wikipedia.org/wiki/Thread_safety" target="_blank" rel="noopener">thread-safe</a>. Another benefit is that by providing <a href="https://en.wikipedia.org/wiki/Reentrancy_(computing" target="_blank" rel="noopener">reentrancy</a>), <a href="https://en.wikipedia.org/wiki/Recursion_(computer_science" target="_blank" rel="noopener">recursion</a>) is automatically supported. When a function calls itself recursively, a return address needs to be stored for each activation of the function so that it can later be used to return from the function activation. Stack structures provide this capability automatically.</p>
<p>a call stack may serve additional purposes, including for example: Local data storage, Parameter passing, Evaluation stack, <a href="https://en.wikipedia.org/wiki/Pointer_(computer_programming" target="_blank" rel="noopener">Pointer</a>) to current instance, Enclosing subroutine context and Other return state (exception, etc).</p>
<h4 id="Stack-Structure"><a href="#Stack-Structure" class="headerlink" title="Stack Structure"></a>Stack Structure</h4><p>A <strong>call stack</strong> is composed of <strong>stack frames</strong> (also called <em>activation records</em> or <em>activation frames</em>). Each stack frame corresponds to a call to a subroutine which has not yet terminated with a return. 通常包含一下几个components:</p>
<ul>
<li>the arguments (parameter values) passed to the routine (if any);<ul>
<li>the return address back to the routine’s caller (e.g. in the running method’s stack frame, an address into the calling method’s code); and</li>
<li>space for the local variables of the routine (if any).</li>
</ul>
</li>
</ul>
<p>每个stack都有一个<strong>stack pointer</strong>指向它的最顶部. Popping a frame off the stack does not constitute a fixed decrement of the stack pointer. At function return, the stack pointer is instead restored to the <strong>frame pointer</strong>, the value of the stack pointer just before the function was called.</p>
<h4 id="Tail-call"><a href="#Tail-call" class="headerlink" title="Tail call"></a>Tail call</h4><p><a href="https://en.wikipedia.org/wiki/Tail_call" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Tail_call</a></p>
<p>A <strong>tail call</strong> is a <a href="https://en.wikipedia.org/wiki/Subroutine" target="_blank" rel="noopener">subroutine</a> call performed as the final action of a procedure. Tail calls can be implemented without adding a new <a href="https://en.wikipedia.org/wiki/Stack_frame" target="_blank" rel="noopener">stack frame</a> to the <a href="https://en.wikipedia.org/wiki/Call_stack" target="_blank" rel="noopener">call stack</a>. Most of the frame of the current procedure is no longer needed, and can be replaced by the frame of the tail call, modified as appropriate. (打比方就像带了parameter的GOTO, can be uniformly coded as [machine code] JUMP instructions)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function foo1(data) &#123;</span><br><span class="line">    return a(data) + 1;</span><br><span class="line">&#125;</span><br><span class="line">function foo2(data) &#123;</span><br><span class="line">    var ret = a(data);</span><br><span class="line">    return ret;</span><br><span class="line">&#125;</span><br><span class="line">function foo3(data) &#123;</span><br><span class="line">    var ret = a(data);</span><br><span class="line">    return (ret == 0) ? 1 : ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>the call to <code>a(data)</code> is in tail position in <code>foo2</code>, but it is <strong>not</strong> in tail position either in <code>foo1</code> or in <code>foo3</code>, because control must return to the caller to allow it to inspect or modify the return value before returning it.</p>
<h3 id="Stack-vs-Heap"><a href="#Stack-vs-Heap" class="headerlink" title="Stack vs Heap"></a>Stack vs Heap</h3><h4 id="一个关于Mem-Magt的好链接-讲了GC-还有stack-vs-heap"><a href="#一个关于Mem-Magt的好链接-讲了GC-还有stack-vs-heap" class="headerlink" title="一个关于Mem Magt的好链接, 讲了GC, 还有stack vs heap"></a>一个关于Mem Magt的好链接, 讲了GC, 还有stack vs heap</h4><p><a href="https://www.journaldev.com/2856/java-jvm-memory-model-memory-management-in-java" target="_blank" rel="noopener">https://www.journaldev.com/2856/java-jvm-memory-model-memory-management-in-java</a></p>
<h4 id="1-Difference-between-stack-and-heap-memory-in-Java"><a href="#1-Difference-between-stack-and-heap-memory-in-Java" class="headerlink" title="1. Difference between stack and heap memory in Java"></a>1. Difference between stack and heap memory in Java</h4><p><a href="http://javarevisited.blogspot.com.au/2013/01/difference-between-stack-and-heap-java.html" target="_blank" rel="noopener">http://javarevisited.blogspot.com.au/2013/01/difference-between-stack-and-heap-java.html</a><a href="https://www.journaldev.com/4098/java-heap-space-vs-stack-memory" target="_blank" rel="noopener">https://www.journaldev.com/4098/java-heap-space-vs-stack-memory</a></p>
<p>Java Stack memory is used for execution of a thread. They contain method specific values that are short-lived and references to other objects in the heap that are getting referred from the method.</p>
<p>The stack is attached to a thread, so when the thread exits the stack is reclaimed. The heap is typically allocated at application startup by the runtime, and is reclaimed when the application (technically process) exits.</p>
<p>The stack is faster because the access pattern makes it trivial to allocate and deallocate memory from it (a pointer/integer is simply incremented or decremented), while the heap has much more complex bookkeeping involved in an allocation or free. Also, each byte in the stack tends to be reused very frequently which means it tends to be mapped to the processor’s cache, making it very fast. Another performance hit for the heap is that the heap, being mostly a global resource, typically has to be multi-threading safe, i.e. each allocation and deallocation needs to be - typically - synchronized with “all” other heap accesses in the program.</p>
<p>来自 <a href="http://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap" target="_blank" rel="noopener">http://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap</a></p>
<p>JVMs can use a technique called escape analysis, by which they can tell that certain objects remain confined to a single thread for their entire lifetime, and that lifetime is bounded by the lifetime of a given stack frame. Such objects can be safely allocated on the stack instead of the heap. Even better, for small objects, the JVM can optimize away the allocation entirely and simply hoist the object’s fields into registers. Thus, beyond saying “the object is created and the field is there too”, one cannot say if something is on the heap or on the stack. Note that for small, short lived objects, its possible that the ‘object’ won’t exist in memory as such and may instead have its fields placed directly in registers. JVMs are surprisingly good at figuring out things that we used to assume only the developer could know. By letting the JVM choose between stack allocation and heap allocation on a case-by-case basis, we can get the performance benefits of stack allocation without making the programmer agonize over whether to allocate on the stack or on the heap. Thus, if you have code that looks like:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">void foo(int arg) &#123;</span><br><span class="line">    Bar qux = new Bar(arg);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>where the … doesn’t allow qux to leave that scope, qux may be allocated on the stack instead. This is actually a win for the VM because it means it doesn’t need to ever be garbage collected - it will disappear when it leaves the scope.</p>
<p><a href="http://programmers.stackexchange.com/questions/65281/stack-and-heap-memory-in-java" target="_blank" rel="noopener">http://programmers.stackexchange.com/questions/65281/stack-and-heap-memory-in-java</a></p>
<h4 id="2-Java-Heap-Space-or-Java-Heap-Memory"><a href="#2-Java-Heap-Space-or-Java-Heap-Memory" class="headerlink" title="2. Java Heap Space or Java Heap Memory"></a>2. Java Heap Space or Java Heap Memory</h4><p><a href="http://javarevisited.blogspot.com/2011/05/java-heap-space-memory-size-jvm.html" target="_blank" rel="noopener">http://javarevisited.blogspot.com/2011/05/java-heap-space-memory-size-jvm.html</a></p>
<p>Heap in Java generally located at bottom of address space and move upwards. whenever we create object using new operator or by any another means object is allocated memory from Heap and When object dies or garbage collected ,memory goes back to Heap space in Java<a href="http://programmers.stackexchange.com/questions/65281/stack-and-heap-memory-in-java" target="_blank" rel="noopener">http://programmers.stackexchange.com/questions/65281/stack-and-heap-memory-in-java</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/28/68-Text-Justification/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="拨鼠侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boshu_gif.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="拨鼠侠的一天">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/28/68-Text-Justification/" itemprop="url">68 Text Justification</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-28T20:09:38-08:00">
                2018-11-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Simulation/" itemprop="url" rel="index">
                    <span itemprop="name">Simulation</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/28/68-Text-Justification/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/28/68-Text-Justification/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本题考查细节处理和根据要求写出程序的能力. 思路就是顺序扫描词, 一行一行将词放入. 对于每一行, 先求出这行最多能放下多少个单词, 再根据是不是最后一行决定是left justification还是平均分布空格. </p>
<p>注意过程中有多处需要巧妙构思的写法. 比如怎么平均分布空格. 具体看代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">fullJustify</span><span class="params">(String[] words, <span class="keyword">int</span> maxWidth)</span> </span>&#123;</span><br><span class="line">      List&lt;String&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">      <span class="keyword">int</span> wordIdx = <span class="number">0</span>;</span><br><span class="line">      <span class="comment">// 每个loop相当于一行</span></span><br><span class="line">      <span class="keyword">while</span> (wordIdx &lt; words.length) &#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="comment">// 新开一行先放一个词进去, count是该行的字符数</span></span><br><span class="line">        <span class="keyword">int</span> count = words[wordIdx].length();</span><br><span class="line">        <span class="comment">// 本行能放的最后一个词的index, 出界代表放不下</span></span><br><span class="line">        <span class="keyword">int</span> lastWordIdx = wordIdx + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 试着尽量放多的词</span></span><br><span class="line">        <span class="keyword">while</span> (lastWordIdx &lt; words.length) &#123;</span><br><span class="line">          <span class="keyword">if</span> (count + <span class="number">1</span> + words[lastWordIdx].length() &gt; maxWidth) <span class="keyword">break</span>;</span><br><span class="line">          count += <span class="number">1</span> + words[lastWordIdx].length();</span><br><span class="line">          lastWordIdx++;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        sb.append(words[wordIdx]);</span><br><span class="line">        <span class="comment">// 放完第一个词还剩几个词要放</span></span><br><span class="line">        <span class="keyword">int</span> numOfWordsLeft = lastWordIdx - wordIdx - <span class="number">1</span>;<span class="comment">// 注意这里不要写错</span></span><br><span class="line">        <span class="comment">// 如果是最后一行则靠左justify,把词依次放入(一个空格隔开)然后后面填上空格</span></span><br><span class="line">        <span class="keyword">if</span> (lastWordIdx == words.length || numOfWordsLeft == <span class="number">0</span>) &#123;<span class="comment">//注意这个判断</span></span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = wordIdx + <span class="number">1</span>; i &lt; lastWordIdx; i++) &#123;<span class="comment">//注意这里i的范围</span></span><br><span class="line">            sb.append(<span class="string">' '</span>);<span class="comment">//先放空格</span></span><br><span class="line">            sb.append(words[i]);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// 填上空格, 注意这里的i取值直接送sb末尾开始就行</span></span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = sb.length(); i &lt; maxWidth; i++) &#123;</span><br><span class="line">            sb.append(<span class="string">' '</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;<span class="comment">// 不是最后一行,需要平均分配空格</span></span><br><span class="line">          <span class="comment">// spaces - 每个词后面跟多少空格</span></span><br><span class="line">          <span class="comment">// extraSpace - 总共需要给多少个词多加1个空格</span></span><br><span class="line">          <span class="keyword">int</span> spaces = (maxWidth - count) / numOfWordsLeft;</span><br><span class="line">          <span class="keyword">int</span> extraSpace = (maxWidth - count) % numOfWordsLeft;</span><br><span class="line">          <span class="comment">// 放入剩下的词</span></span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = wordIdx + <span class="number">1</span>; i &lt; lastWordIdx; i++) &#123;</span><br><span class="line">            <span class="comment">// 每个词后面加spaces个空格</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; spaces; j++) &#123;</span><br><span class="line">              sb.append(<span class="string">' '</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 如需extraSpace就加上</span></span><br><span class="line">            <span class="keyword">if</span> (extraSpace &gt; <span class="number">0</span>) &#123;</span><br><span class="line">              sb.append(<span class="string">' '</span>);</span><br><span class="line">              extraSpace--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 注意这个空格不要漏, 这是已经算上了的空格</span></span><br><span class="line">            sb.append(<span class="string">' '</span>);</span><br><span class="line">            sb.append(words[i]);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        wordIdx = lastWordIdx;<span class="comment">//注意</span></span><br><span class="line">        res.add(sb.toString());</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/27/815-Bus-Routes/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="拨鼠侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boshu_gif.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="拨鼠侠的一天">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/27/815-Bus-Routes/" itemprop="url">815 Bus Routes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-27T21:53:31-08:00">
                2018-11-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/27/815-Bus-Routes/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/27/815-Bus-Routes/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>典型bfs最短路径题. 本题关键是看出问题的本质: 即bus和bus之间建边, 可以把bus看做是一个node (但是做题时候queue里还是放的stop). bfs每一层包含由这个车站可以不转车到达的所有车站</p>
<p><strong>注意一个关键点: visited记录的是已经访问完的bus而不是stop</strong><br>否则我的写法每次都会遍历所有buses, 肯定TLE</p>
<p>那么实现就简单了: 一开始把S放入queue, 算作第0层, 然后把所有S能不转车到达的点加入queue, 这算作第1层<br>比如: <code>routes = [1, 2, 7], [3, 6, 7]</code> 如果’S=7’, 那就把’1, 2, 3, 6’都放入queue里, 如果’S=6’, 就放’3, 7’</p>
<p>我用的busMap存储每个bus的所有stops,然后在针对某个stop查找下一层的时候需要遍历每个bus看这个stop在不在. 答案的方法是用一个map存储经过每个stop的所有bus, 那立马就能知道经过这个stop的所有bus了, 显然是更好地方法, 下一刷可以这么写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BusRoutes</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  Map&lt;Integer, Set&lt;Integer&gt;&gt; busMap;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numBusesToDestination</span><span class="params">(<span class="keyword">int</span>[][] routes, <span class="keyword">int</span> S, <span class="keyword">int</span> T)</span> </span>&#123;</span><br><span class="line">    buildGraph(routes);</span><br><span class="line">    Set&lt;Integer&gt; busSeen = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    Queue&lt;Integer&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    queue.offer(S);</span><br><span class="line">    <span class="keyword">int</span> transfer = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">      <span class="keyword">int</span> size = queue.size();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> curStop = queue.poll();</span><br><span class="line">        <span class="keyword">if</span> (curStop == T) <span class="keyword">return</span> transfer;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 这里遍历每个bus看curStop在不在里面</span></span><br><span class="line">        <span class="comment">// 如果按照答案的方法就不用这个遍历</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; routes.length; j++) &#123;</span><br><span class="line">          <span class="keyword">if</span> (busSeen.contains(j)) <span class="keyword">continue</span>;</span><br><span class="line">          <span class="keyword">if</span> (busMap.get(j).contains(curStop)) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> sameBusStop : busMap.get(j)) &#123;</span><br><span class="line">              queue.offer(sameBusStop);</span><br><span class="line">            &#125;</span><br><span class="line">            busSeen.add(j);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//本层结束</span></span><br><span class="line">      transfer++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildGraph</span><span class="params">(<span class="keyword">int</span>[][] routes)</span> </span>&#123;</span><br><span class="line">    busMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; routes.length; i++) &#123;</span><br><span class="line">      busMap.put(i, <span class="keyword">new</span> HashSet&lt;&gt;());</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; routes[i].length; j++) &#123;</span><br><span class="line">        busMap.get(i).add(routes[i][j]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] routes = &#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>&#125;, &#123;<span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>&#125;&#125;;</span><br><span class="line">    BusRoutes sol = <span class="keyword">new</span> BusRoutes();</span><br><span class="line">    System.out.println(sol.numBusesToDestination(routes, <span class="number">1</span>, <span class="number">6</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/26/Google-on-site-11-26/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="拨鼠侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boshu_gif.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="拨鼠侠的一天">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/26/Google-on-site-11-26/" itemprop="url">Google on-site 11/26</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-26T23:22:03-08:00">
                2018-11-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/面经/" itemprop="url" rel="index">
                    <span itemprop="name">面经</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/26/Google-on-site-11-26/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/26/Google-on-site-11-26/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>bus route - <a href="https://leetcode.com/problems/bus-routes/" target="_blank" rel="noopener">https://leetcode.com/problems/bus-routes/</a></p>
<p>union find 删节点</p>
<p>largest segment in an array</p>
<p>bike person match</p>
<p>​    - 求最小距离之类的么?</p>
<p>​    - 问你，你能拿到哪个bike, 用heap</p>
<p>string compare</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/19/212-Word-Search-II/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="拨鼠侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boshu_gif.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="拨鼠侠的一天">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/19/212-Word-Search-II/" itemprop="url">212 Word Search II</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-19T22:33:12-08:00">
                2018-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Graph/" itemprop="url" rel="index">
                    <span itemprop="name">Graph</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/19/212-Word-Search-II/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/19/212-Word-Search-II/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>注意做完BoggleGame再来做这题就知道有个大优化, 就是不用每次call Trie里的search method, 只要每次dfs的时候顺着走就行. 自做代码放在最后了. 其实看大神的方法已经包含了这个优化. 这里去看Boggle Game就行了. </p>
<p>复杂度: O(kl + mn4^l)<br>m, n 矩阵长宽, l是平均单词长度, k是dict的单词数<br>kl是建Trie时间, mn是外层循环, 4^l是搜索的时间, 因为此时4个方向4种选择, 搜索树深度是l</p>
<p>之前:</p>
<p>这个题其实就是很简单的建Trie然后四个方向dfs，注意一些细节的处理即可</p>
<ol>
<li>要用一个<code>boolean[][]</code>的矩阵去track每个字符有没有被访问过，不能重复访问</li>
<li>剪枝1: 先找到最大单词长度限制搜索深度</li>
<li>剪枝2：用一个hasPrefix函数判断到这个字符为止还有戏吗，如果没有马上return</li>
<li>错点：注意结果去重，同一个单词不要放入结果两次</li>
<li>错点：注意在第一次进入dfs之前要把visited设为true</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">int</span>[] dx = &#123;<span class="number">0</span>, -<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span>[] dy = &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, -<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">char</span>[][] board;</span><br><span class="line"><span class="keyword">boolean</span>[][] visited;</span><br><span class="line">Trie trie;</span><br><span class="line"><span class="keyword">int</span> maxLen;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getMaxLength</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">    maxLen = Integer.MIN_VALUE;</span><br><span class="line">    <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">        maxLen = Math.max(word.length(), maxLen);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">findWords</span><span class="params">(<span class="keyword">char</span>[][] board, String[] words)</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  Set&lt;String&gt; res = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">  <span class="keyword">this</span>.board = board;</span><br><span class="line">  <span class="keyword">this</span>.visited = visited;</span><br><span class="line">  <span class="keyword">int</span> m = board.length;</span><br><span class="line">  <span class="keyword">int</span> n = board[<span class="number">0</span>].length;</span><br><span class="line">  trie = <span class="keyword">new</span> Trie(<span class="keyword">new</span> TrieNode());</span><br><span class="line">  trie.buildTrie(words);</span><br><span class="line">  getMaxLength(words);</span><br><span class="line">  visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[m][n];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">        visited[i][j] = <span class="keyword">true</span>;<span class="comment">//错点，这里忘了</span></span><br><span class="line">        dfs(board[i][j]+<span class="string">""</span>, i, j, res);</span><br><span class="line">        visited[i][j] = <span class="keyword">false</span>;<span class="comment">//错点，这里忘了</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;&gt;(res);</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(String cur, <span class="keyword">int</span> x, <span class="keyword">int</span> y, Set&lt;String&gt; res)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!trie.hasPrefix(cur)) &#123;<span class="comment">//这里忘了,会超时</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (trie.search(cur)) &#123;</span><br><span class="line">    res.add(cur);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (cur.length() &gt;= maxLen) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> xx = x + dx[i];</span><br><span class="line">    <span class="keyword">int</span> yy = y + dy[i];</span><br><span class="line">    <span class="keyword">if</span> (canGo(xx, yy)) &#123;</span><br><span class="line">      visited[xx][yy] = <span class="keyword">true</span>;</span><br><span class="line">      dfs(cur + board[xx][yy], xx, yy, res);</span><br><span class="line">      visited[xx][yy] = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canGo</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x &lt; <span class="number">0</span> || x &gt;= board.length || y &lt; <span class="number">0</span> || y &gt;= board[<span class="number">0</span>].length || visited[x][y]</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123;</span><br><span class="line">    TrieNode[] children = <span class="keyword">new</span> TrieNode[<span class="number">26</span>];</span><br><span class="line">    <span class="keyword">boolean</span> isWord = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Trie</span> </span>&#123;</span><br><span class="line">    TrieNode root;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Trie</span><span class="params">(TrieNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.root = root;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildTrie</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">        add(word);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">search</span> <span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] w = word.toCharArray();</span><br><span class="line">        TrieNode cur = root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; w.length; i++) &#123;</span><br><span class="line">          <span class="keyword">char</span> c = w[i];</span><br><span class="line">          <span class="keyword">if</span> (cur == <span class="keyword">null</span> || cur.children[c - <span class="string">'a'</span>] == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          cur = cur.children[c - <span class="string">'a'</span>];</span><br><span class="line">          <span class="comment">// 错点，下面判断isWord不要写在上面这行之前</span></span><br><span class="line">          <span class="keyword">if</span> (i == w.length - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!cur.isWord) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasPrefix</span> <span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] w = word.toCharArray();</span><br><span class="line">        TrieNode cur = root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; w.length; i++) &#123;</span><br><span class="line">          <span class="keyword">char</span> c = w[i];</span><br><span class="line">          <span class="keyword">if</span> (cur == <span class="keyword">null</span> || cur.children[c - <span class="string">'a'</span>] == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          cur = cur.children[c - <span class="string">'a'</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">char</span>[] w = word.toCharArray();</span><br><span class="line">      TrieNode cur = root;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; w.length; i++) &#123;</span><br><span class="line">        <span class="keyword">char</span> c = w[i];</span><br><span class="line">        <span class="keyword">if</span> (cur.children[c - <span class="string">'a'</span>] == <span class="keyword">null</span>) &#123;</span><br><span class="line">          TrieNode next = <span class="keyword">new</span> TrieNode();</span><br><span class="line">          cur.children[c - <span class="string">'a'</span>] = next;</span><br><span class="line">        &#125;</span><br><span class="line">        cur = cur.children[c - <span class="string">'a'</span>];</span><br><span class="line">        <span class="keyword">if</span> (i == w.length - <span class="number">1</span>) &#123;</span><br><span class="line">          cur.isWord = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里po一个详细的大神的的超级优化思路:</p>
<h2 id="Backtracking-Trie"><a href="#Backtracking-Trie" class="headerlink" title="Backtracking + Trie)"></a><a href="https://leetcode.com/problems/word-search-ii/discuss/59780/Java-15ms-Easiest-Solution-(100.00" target="_blank" rel="noopener">Backtracking + Trie</a>)</h2><p>Intuitively, start from every cell and try to build a word in the dictionary. <code>Backtracking (dfs)</code> is the powerful way to exhaust every possible ways. Apparently, we need to do <code>pruning</code>when current character is not in any word.</p>
<ol>
<li>How do we instantly know the current character is invalid? <code>HashMap</code>?</li>
<li>How do we instantly know what’s the next valid character? <code>LinkedList</code>?</li>
<li>But the next character can be chosen from a list of characters. <code>&quot;Mutil-LinkedList&quot;</code>?</li>
</ol>
<p>Combing them, <code>Trie</code> is the natural choice. Notice that:</p>
<ol>
<li><code>TrieNode</code> is all we need. <code>search</code> and <code>startsWith</code> are useless.</li>
<li>No need to store character at TrieNode. <code>c.next[i] != null</code> is enough.</li>
<li>Never use <code>c1 + c2 + c3</code>. Use <code>StringBuilder</code>.</li>
<li>No need to use <code>O(n^2)</code> extra space <code>visited[m][n].</code></li>
<li>No need to use <code>StringBuilder</code>. Storing <code>word</code> itself at leaf node is enough.</li>
<li>No need to use <code>HashSet</code> to de-duplicate. Use “one time search” trie.</li>
</ol>
<p>For more explanations, check out <a href="http://algobox.org/word-search-ii/" target="_blank" rel="noopener">dietpepsi’s blog</a>.</p>
<hr>
<h2 id="Code-Optimization"><a href="#Code-Optimization" class="headerlink" title="Code Optimization"></a>Code Optimization</h2><hr>
<p>UPDATE: Thanks to @dietpepsi we further improved from <code>17ms</code> to <code>15ms</code>.</p>
<ol>
<li><code>59ms</code>: Use <code>search</code> and <code>startsWith</code> in Trie class like <a href="https://leetcode.com/discuss/36337/my-simple-and-clean-java-code-using-dfs-and-trie" target="_blank" rel="noopener">this popular solution.</a></li>
<li><code>33ms</code>: Remove Trie class which unnecessarily starts from <code>root</code> in every <code>dfs</code> call.</li>
<li><code>30ms</code>: Use <code>w.toCharArray()</code> instead of <code>w.charAt(i)</code>.</li>
<li><code>22ms</code>: Use <code>StringBuilder</code> instead of <code>c1 + c2 + c3</code>.</li>
<li><code>20ms</code>: Remove <code>StringBuilder</code> completely by storing <code>word</code> instead of <code>boolean</code> in TrieNode.</li>
<li><code>20ms</code>: Remove <code>visited[m][n]</code> completely by modifying <code>board[i][j] = &#39;#&#39;</code> directly.</li>
<li><code>18ms</code>: check validity, e.g., <code>if(i &gt; 0) dfs(...)</code>, before going to the next <code>dfs</code>.</li>
<li><code>17ms</code>: De-duplicate <code>c - a</code> with one variable <code>i</code>.</li>
<li><code>15ms</code>: Remove <code>HashSet</code> completely. dietpepsi’s idea is awesome.</li>
</ol>
<p>The final run time is <code>15ms</code>. Hope it helps!</p>
<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">findWords</span><span class="params">(<span class="keyword">char</span>[][] board, String[] words)</span> </span>&#123;</span><br><span class="line">    List&lt;String&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    TrieNode root = buildTrie(words);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; board.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; board[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">            dfs (board, i, j, root, res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">char</span>[][] board, <span class="keyword">int</span> i, <span class="keyword">int</span> j, TrieNode p, List&lt;String&gt; res)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = board[i][j];</span><br><span class="line">    <span class="keyword">if</span> (c == <span class="string">'#'</span> || p.next[c - <span class="string">'a'</span>] == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    p = p.next[c - <span class="string">'a'</span>];</span><br><span class="line">    <span class="keyword">if</span> (p.word != <span class="keyword">null</span>) &#123;   <span class="comment">// found one</span></span><br><span class="line">        res.add(p.word);</span><br><span class="line">        p.word = <span class="keyword">null</span>;     <span class="comment">// de-duplicate</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    board[i][j] = <span class="string">'#'</span>;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>) dfs(board, i - <span class="number">1</span>, j ,p, res); </span><br><span class="line">    <span class="keyword">if</span> (j &gt; <span class="number">0</span>) dfs(board, i, j - <span class="number">1</span>, p, res);</span><br><span class="line">    <span class="keyword">if</span> (i &lt; board.length - <span class="number">1</span>) dfs(board, i + <span class="number">1</span>, j, p, res); </span><br><span class="line">    <span class="keyword">if</span> (j &lt; board[<span class="number">0</span>].length - <span class="number">1</span>) dfs(board, i, j + <span class="number">1</span>, p, res); </span><br><span class="line">    board[i][j] = c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> TrieNode <span class="title">buildTrie</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">    TrieNode root = <span class="keyword">new</span> TrieNode();</span><br><span class="line">    <span class="keyword">for</span> (String w : words) &#123;</span><br><span class="line">        TrieNode p = root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c : w.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">int</span> i = c - <span class="string">'a'</span>;</span><br><span class="line">            <span class="keyword">if</span> (p.next[i] == <span class="keyword">null</span>) p.next[i] = <span class="keyword">new</span> TrieNode();</span><br><span class="line">            p = p.next[i];</span><br><span class="line">       &#125;</span><br><span class="line">       p.word = w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123;</span><br><span class="line">    TrieNode[] next = <span class="keyword">new</span> TrieNode[<span class="number">26</span>];</span><br><span class="line">    String word;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>自做通过:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Trie trie;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">char</span>[][] board;</span><br><span class="line">  <span class="keyword">int</span> m;</span><br><span class="line">  <span class="keyword">int</span> n;</span><br><span class="line">  <span class="keyword">int</span>[] dx = &#123;<span class="number">0</span>, -<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line">  <span class="keyword">int</span>[] dy = &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">findWords</span><span class="params">(<span class="keyword">char</span>[][] board, String[] words)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.m = board.length;</span><br><span class="line">    <span class="keyword">this</span>.n = board[<span class="number">0</span>].length;</span><br><span class="line">    <span class="keyword">this</span>.board = board;</span><br><span class="line">    <span class="keyword">this</span>.trie = <span class="keyword">new</span> Trie();</span><br><span class="line">    <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">      trie.addWord(word);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Set&lt;String&gt; res = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">        dfs(<span class="keyword">new</span> HashSet&lt;&gt;(), i, j, <span class="keyword">new</span> StringBuilder(), trie.root, res);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LinkedList&lt;&gt;(res);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(Set&lt;Integer&gt; visited, <span class="keyword">int</span> x, <span class="keyword">int</span> y, StringBuilder curPath, TrieNode curNode, Set&lt;String&gt; res)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!curNode.children.containsKey(board[x][y])) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    curNode = curNode.children.get(board[x][y]);</span><br><span class="line">    curPath.append(board[x][y]);</span><br><span class="line">    visited.add(x * n + y);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (curNode.isWord) &#123;</span><br><span class="line">      res.add(curPath.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> xx = x + dx[i];</span><br><span class="line">      <span class="keyword">int</span> yy = y + dy[i];</span><br><span class="line">      <span class="keyword">if</span> (!canGo(xx, yy, visited)) <span class="keyword">continue</span>;</span><br><span class="line">      dfs(visited, xx, yy, curPath, curNode.children.get(board[xx][yy]), res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    visited.remove(x * n + y);</span><br><span class="line">    curPath.setLength(curPath.length() - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canGo</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, Set&lt;Integer&gt; visited)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span> || x &gt;= m || y &lt; <span class="number">0</span> || y &gt;= n || visited.contains(x * n + y)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Trie</span></span>&#123;</span><br><span class="line">    TrieNode root;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Trie</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      root = <span class="keyword">new</span> TrieNode();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addWord</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">      TrieNode node = root;</span><br><span class="line">      <span class="keyword">char</span>[] arr = word.toCharArray();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; word.length(); i++) &#123;</span><br><span class="line">        <span class="keyword">char</span> c = arr[i];</span><br><span class="line">        node.children.putIfAbsent(c, <span class="keyword">new</span> TrieNode());</span><br><span class="line">        node = node.children.get(c);</span><br><span class="line">        <span class="keyword">if</span> (i == word.length() - <span class="number">1</span>) node.isWord = <span class="keyword">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123;</span><br><span class="line">    Map&lt;Character, TrieNode&gt; children = <span class="keyword">new</span> HashMap();</span><br><span class="line">    <span class="keyword">boolean</span> isWord;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/18/215-Kth-Largest-Element-in-an-Array/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="拨鼠侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boshu_gif.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="拨鼠侠的一天">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/18/215-Kth-Largest-Element-in-an-Array/" itemprop="url">215 Kth Largest Element in an Array</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-18T12:00:10-08:00">
                2018-11-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Array/" itemprop="url" rel="index">
                    <span itemprop="name">Array</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/18/215-Kth-Largest-Element-in-an-Array/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/18/215-Kth-Largest-Element-in-an-Array/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findKthLargest</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;      </span><br><span class="line">       <span class="keyword">int</span> n = nums.length;</span><br><span class="line">       <span class="comment">//转化为求k index的问题</span></span><br><span class="line">       k = n - k;</span><br><span class="line">       <span class="keyword">int</span> low = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">int</span> high = nums.length - <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">while</span> (low &lt;= high) &#123;</span><br><span class="line">           <span class="keyword">int</span> p = partition(nums, low, high);</span><br><span class="line">           <span class="keyword">if</span> (p == k) &#123;</span><br><span class="line">               <span class="keyword">return</span> nums[p];</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (p &lt; k) &#123;</span><br><span class="line">               low = p + <span class="number">1</span>;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               high = p - <span class="number">1</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">       <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line"><span class="comment">// 模板partiion法，注意先j--再i++, 最后i是返回值</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> i = low;</span><br><span class="line">       <span class="keyword">int</span> j = high;</span><br><span class="line">       <span class="keyword">int</span> pVal = nums[i];</span><br><span class="line">       <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">           <span class="keyword">while</span> (i &lt; j &amp;&amp; nums[j] &gt;= pVal) &#123;</span><br><span class="line">               j--;    </span><br><span class="line">           &#125;</span><br><span class="line">           nums[i] = nums[j];</span><br><span class="line">           <span class="keyword">while</span> (i &lt; j &amp;&amp; nums[i] &lt;= pVal) &#123;</span><br><span class="line">               i++;</span><br><span class="line">           &#125;</span><br><span class="line">           nums[j] = nums[i];</span><br><span class="line">       &#125;</span><br><span class="line">       nums[i] = pVal;</span><br><span class="line">       <span class="keyword">return</span> i;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span> <span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> temp = nums[i];</span><br><span class="line">       nums[i] = nums[j];</span><br><span class="line">       nums[j] = temp;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>下面是做AB的WiggleSort变体时候写的:<br>题目是说给一个数组,要求把元素排成所有偶数位上的元素大于所有奇数位上的元素</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span>[] nums = &#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">4</span>&#125;;</span><br><span class="line">  <span class="keyword">int</span>[] nums2 = &#123;<span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">4</span>&#125;;</span><br><span class="line">  <span class="keyword">int</span>[] nums3 = &#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">6</span>&#125;;</span><br><span class="line">  wiggleSort_AB(nums3);</span><br><span class="line">  System.out.println();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i : nums3) &#123;</span><br><span class="line">    System.out.print(i + <span class="string">", "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 奇数个数组多一个偶数位的数, 所以input必须满足大数比小数多1个</span></span><br><span class="line"><span class="comment">// 这题要求是所有偶数位的数大于奇数位的数!!背下做法</span></span><br><span class="line"><span class="comment">// 如果换要求,反过来奇数位的数大的话就改一行就行,见代码</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">wiggleSort_AB</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> n = nums.length;</span><br><span class="line">  <span class="keyword">int</span> midIdx = n % <span class="number">2</span> == <span class="number">0</span> ? n / <span class="number">2</span> - <span class="number">1</span> : n / <span class="number">2</span>;<span class="comment">//注意和median不同</span></span><br><span class="line">  kth(nums, midIdx + <span class="number">1</span>, <span class="number">0</span>, n - <span class="number">1</span>);<span class="comment">//注意是midIdx+1,因为是第多少个数</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i : nums) &#123;</span><br><span class="line">    System.out.print(i + <span class="string">", "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> j = midIdx + <span class="number">1</span>;<span class="comment">//注意背下这里,从midIdx+1开始的话奇数和偶数个数array都能适用</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (j &lt; n) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;<span class="comment">//注意这里要求是偶数位大于奇数位,如果奇数位大于偶数位就写成!=0就行</span></span><br><span class="line">      swap(nums, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">    i++;</span><br><span class="line">    j++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 找第k个数</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">kth</span> <span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (low &gt;= high) <span class="keyword">return</span> nums[low];</span><br><span class="line">  <span class="keyword">int</span> p = partition(nums, low, high);</span><br><span class="line">  <span class="keyword">if</span> (p + <span class="number">1</span> == k) <span class="keyword">return</span> nums[p];</span><br><span class="line">  <span class="keyword">if</span> (p + <span class="number">1</span> &lt; k) &#123;</span><br><span class="line">    <span class="keyword">return</span> kth(nums, k, p + <span class="number">1</span>, high);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> kth(nums, k, low, p - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (low &gt;= high) &#123;</span><br><span class="line">    <span class="keyword">return</span> low;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> pVal = nums[low];</span><br><span class="line">  <span class="keyword">int</span> i = low; <span class="keyword">int</span> j = high;</span><br><span class="line">  <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j &amp;&amp; nums[j] &gt; pVal) j--;</span><br><span class="line">    nums[i] = nums[j];</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j &amp;&amp; nums[i] &lt;= pVal) i++;</span><br><span class="line">    nums[j] = nums[i];</span><br><span class="line">  &#125;</span><br><span class="line">  nums[i] = pVal;</span><br><span class="line">  <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span> <span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> temp = arr[i];</span><br><span class="line">  arr[i] = arr[j];</span><br><span class="line">  arr[j] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/17/269-Alien-Dict/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="拨鼠侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boshu_gif.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="拨鼠侠的一天">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/17/269-Alien-Dict/" itemprop="url">269 Alien Dict</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-17T10:26:57-08:00">
                2018-11-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Graph/" itemprop="url" rel="index">
                    <span itemprop="name">Graph</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/17/269-Alien-Dict/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/17/269-Alien-Dict/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://leetcode.com/problems/alien-dictionary/submissions/" target="_blank" rel="noopener">269 Alien Dict</a></p>
<p>我们重点分析时间复杂度，我们假设拓扑图中有n个节点和m条边。下面我们首先分析下DFS的复杂度：DFS会遍历所有的节点和所有的边，因此复杂度很好分析那就是O(n + m)，这是一个线性时间，比较好的算法。 </p>
<p>BFS方式，首先需要init一个拥有n个节点的列表，并且需要遍历一遍图中的边逻辑；这个方式的时间复杂度也是O(n + m)，同样是一个线性时间</p>
<p>Topo-bfs:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> Map&lt;Character, Set&lt;Character&gt;&gt; graph;</span><br><span class="line">  <span class="keyword">private</span> Map&lt;Character, Integer&gt; inDegree;</span><br><span class="line">  <span class="keyword">private</span> String[] words;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">alienOrder</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (words == <span class="keyword">null</span> || words.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">this</span>.words = words;</span><br><span class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    buildGraph();</span><br><span class="line">    Queue&lt;Character&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Character c : inDegree.keySet()) &#123;</span><br><span class="line">      <span class="keyword">if</span> (inDegree.get(c) == <span class="number">0</span>) &#123;</span><br><span class="line">        queue.offer(c);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">      <span class="keyword">char</span> cur = queue.poll();</span><br><span class="line">      sb.append(cur);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">char</span> next : graph.getOrDefault(cur, <span class="keyword">new</span> LinkedHashSet&lt;&gt;())) &#123;</span><br><span class="line">        <span class="keyword">if</span> (inDegree.get(next) == <span class="number">1</span>) &#123;</span><br><span class="line">          queue.offer(next);</span><br><span class="line">        &#125;</span><br><span class="line">        inDegree.put(next, inDegree.get(next) - <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">if</span> (inDegree.size() != sb.length()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> sb.toString();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildGraph</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    graph = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    inDegree = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">      <span class="keyword">for</span> (Character c :  word.toCharArray()) &#123;</span><br><span class="line">        inDegree.putIfAbsent(c, <span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; words.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">char</span>[] arr1 = words[i].toCharArray();</span><br><span class="line">      <span class="keyword">char</span>[] arr2 = words[i + <span class="number">1</span>].toCharArray();</span><br><span class="line">      <span class="keyword">int</span> len = Math.min(arr1.length, arr2.length);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len; j++) &#123;</span><br><span class="line">        <span class="keyword">char</span> a = arr1[j];</span><br><span class="line">        <span class="keyword">char</span> b = arr2[j];</span><br><span class="line">        <span class="keyword">if</span> (a != b) &#123;</span><br><span class="line">          graph.putIfAbsent(a, <span class="keyword">new</span> LinkedHashSet&lt;&gt;());</span><br><span class="line">          <span class="keyword">if</span> (!graph.get(a).contains(b)) &#123;</span><br><span class="line">            graph.get(a).add(b);</span><br><span class="line">            inDegree.put(b, inDegree.get(b) + <span class="number">1</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span>;<span class="comment">//break写在if里面会fail最后一个test case </span></span><br><span class="line">                <span class="comment">//["wrt","wrf","er","ett","rftt","te"]</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Topo-DFS: </p>
<p>建图基本和bfs法一样，唯一区别是需要一个visit map来知道三种状态：unseen,visiting和visited, 不需要indegree的map了</p>
<p><strong>注意两点：</strong></p>
<ol>
<li>visited的条件，也就是入结果的条件是这个char的邻居都被visited了</li>
<li>结果放入sb的顺序是和topological order反的，所以最后输出时候要reverse sb</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> Map&lt;Character, Set&lt;Character&gt;&gt; graph;</span><br><span class="line">  <span class="comment">// -1 mean unseen, 0 means visiting, 1 means visited</span></span><br><span class="line">  <span class="keyword">private</span> Map&lt;Character, Integer&gt; visit;</span><br><span class="line">  <span class="keyword">private</span> String[] words;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">alienOrder</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.words = words;</span><br><span class="line">    visit = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    graph = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (words == <span class="keyword">null</span> || words.length == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    buildGraph();</span><br><span class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">char</span> c : visit.keySet()) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!dfs(c, sb)) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"reverse of res is: "</span> + sb.toString());</span><br><span class="line">    <span class="keyword">return</span> sb.reverse().toString();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">dfs</span><span class="params">(<span class="keyword">char</span> cur, StringBuilder sb)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (visit.get(cur) == <span class="number">1</span>) &#123;<span class="comment">//visited</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (visit.get(cur) == <span class="number">0</span>) &#123;<span class="comment">//have cycle</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    visit.put(cur, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">char</span> next : graph.getOrDefault(cur, <span class="keyword">new</span> HashSet&lt;&gt;())) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!dfs(next, sb)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    visit.put(cur, <span class="number">1</span>);</span><br><span class="line">    sb.append(cur);<span class="comment">//小弟都被visited，自己就被visited</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildGraph</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">        visit.put(c, -<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; words.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">char</span>[] arr1 = words[i].toCharArray();</span><br><span class="line">      <span class="keyword">char</span>[] arr2 = words[i + <span class="number">1</span>].toCharArray();</span><br><span class="line">      <span class="keyword">int</span> len = Math.min(arr1.length, arr2.length);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len; j++) &#123;</span><br><span class="line">        <span class="keyword">char</span> one = arr1[j];</span><br><span class="line">        <span class="keyword">char</span> two = arr2[j];</span><br><span class="line">        graph.putIfAbsent(one, <span class="keyword">new</span> HashSet&lt;&gt;());</span><br><span class="line">        <span class="keyword">if</span> (one != two) &#123;</span><br><span class="line">          graph.get(one).add(two);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  String[] input = &#123;<span class="string">"ab"</span>, <span class="string">"bc"</span>, <span class="string">"cde"</span>&#125;;</span><br><span class="line">  Solution sol = <span class="keyword">new</span> Solution();</span><br><span class="line">  System.out.println(<span class="string">"order is: "</span> + sol.alienOrder(input));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/15/3-Longest-Substring-Without-Repeating-Characters/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="拨鼠侠">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/boshu_gif.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="拨鼠侠的一天">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/15/3-Longest-Substring-Without-Repeating-Characters/" itemprop="url">3 Longest Substring Without Repeating Characters</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-15T23:20:20-08:00">
                2018-11-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">Leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/15/3-Longest-Substring-Without-Repeating-Characters/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/15/3-Longest-Substring-Without-Repeating-Characters/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://leetcode.com/problems/longest-substring-without-repeating-characters/" target="_blank" rel="noopener">题</a></p>
<p>O(n) 两个指针前后追，用个数组或者map存信息</p>
<p>自己方法：之前用map做到最后一个testcase会超时，换成用int[256]可过</p>
<p><strong>不知为何用chars[“ “ - ‘0’]这样不行，空格会被转换成-16，直接用chars[“ “]即可</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> n = s.length();</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span>[] strArr = s.toCharArray();</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span>[] chars = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">256</span>];</span><br><span class="line">    Arrays.fill(chars, -<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j &amp;&amp; j &lt; s.length()) &#123;</span><br><span class="line">      <span class="keyword">if</span> (chars[strArr[j]] == -<span class="number">1</span>) &#123;</span><br><span class="line">        res = Math.max(res, j - i + <span class="number">1</span>);</span><br><span class="line">        chars[strArr[j]] = j;</span><br><span class="line">        j++;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> lastSeen = chars[strArr[j]];</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= lastSeen) &#123;</span><br><span class="line">          chars[strArr[i++]] = -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        chars[strArr[j]] = j;</span><br><span class="line">        j++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>答案方法：不需要存index</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>, max = <span class="number">0</span>;</span><br><span class="line">    Set&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (j &lt; s.length()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!set.contains(s.charAt(j))) &#123;</span><br><span class="line">            set.add(s.charAt(j++));</span><br><span class="line">            max = Math.max(max, set.size());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            set.remove(s.charAt(i++));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> max;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/boshu_gif.gif" alt="拨鼠侠">
            
              <p class="site-author-name" itemprop="name">拨鼠侠</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">拨鼠侠</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://energyd.disqus.com/count.js" async></script>
    

    

  




	





  














  





  

  

  

  
  

  

  

  

</body>
</html>
